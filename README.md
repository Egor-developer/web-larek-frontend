# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура проекта "Веб-ларек"

# Архитектура MVP
  * Model - классы ProductModel и AppState. 
    Слой данных и бизнес-логики. Модель отвечает за доступ к данным, их обработку и манипуляцию.

  * View - классы UIComponent, ProductCard, PageLayout, Form, ShoppingCart.
    Отвечает за отображение данных пользователю и взаимодействие с пользователем. Визуальные элементы,
    компоненты пользовательского интерфейса

  * Present - в роли Present выступает код в файле index.ts Объединяет Model и View через событийную модель.

# Базовые компоненты:

## Класс UIComponent
  Основной класс, основа для остальных компонентов VIEW. Используется для создания компонентов пользовательскоего интерфейса.

  ### Методы класса
  * toggleClass() - переключение класса
  * setTextContent - текстовое содержание элемента
  * setDisabledState - устанавливает disabled элемента
  * hide - скрывает элемент
  * show - отображает элемент
  * setImageAttributes - устанавливает элементу src и alt
  * render - render элемента

## Класс Api
  Класс для взаимодействия с сервером.

  ### Свойства класса
  * baseUrl: string - основной url
  * requestOptions: string - настройки запроса

  ### Методы класса
  * handleResponse - ответ сервера, ошибки
  * getRequest - get запрос
  * postRequest - post запрос

# Класс ProductModel
  Инициализирует модель данных приложения.

  ### Методы класса
  * emitChanges - инициализирует событие и сообщает подписчикам об изменениях

# Класс EventEmitter
  Брокер событий, позволяет управлять подписками на события и их обработчиками.

  ### Свойства класса
  * _events: Map<EventName, Set<Subscriber>> - это коллекция событий и их подписчиков.

  ### Методы класса
  * on - устанавливает обработчик
  * off - снять обработчик
  * emitEvent - Инициировать событие с данными
  * onAll - Слушать все события
  * offAll - Сбросить все обработчики
  * trigger - Коллбек триггер, генерирующий событие при вызове

# Общие компоненты

# ShoppingCart
  Класс для корзины магазина, позволяет упралвять товарами в корзине, отображает общую стоимось и инициализирует процесс оформления заказа.

  ### Свойства класса
  * _itemsContainer: HTMLElement — список товаров в корзине
  * _totalAmountEl: HTMLElement — элемент с общей стоимостью
  * _checkoutButton: HTMLElement — кнопка для оформления заказа

  ### Методы класса
  * set itemsContainer - установка элементов корзины
  * set selected - контроль состояния кнопки в корзине
  * set total - установка текста общей стоимости

# Класс Form
  Класс предназначен для управления состоянием формы, обработчки событий ввода и отправки формы.

  ### Свойства класса
  * _submit: HTMLButtonElement - кнопка отправки формы
  * _errors?: HTMLElement - элемент отображения ошибок

  ### Методы класса
  * onInputChange - вызывается при изменении полей формы
  * set valid - установка валидности формы
  * set errors - установка текста ошибки
  * render - рендер формы с обновлённым состоянии валидности

# Класс Modal
  Класс для создания и управления модальными окнами. Позволяет открывать и закрывать модальное окно, а так же управлять его содержимым.

  ### Свойства класса
 * _closeButton: HTMLButtonElement - закрытие модального окна
 * _content: HTMLElement - контент модального окна

  ### Методы класса
  * set content - установливает данные
  * openModal - открыть модальное окно
  * closeModal - закрыть модальное окно
  * renderModal - render модального окна

# Дополнительные компоненты

# Класс AppState
  представляющий состояние приложения, включая данные каталога, предпросмотра, корзины, заказа и ошибок формы. Наследуеются от класса Model.

  ### Свойства класса
  * catalog: IProduct[] - список товаров
  * basketList: IProduct[] - список товаров в корзине
  * order: IOrder - данные заказа
  * formErrors: FormErrors - ошибки форм 

  ### Методы класса
  * getTotal - возвращает кол-во товара
  * getTOtalPrice - возвращает общую сумму корзины
  * setCatalog - инициалазация события изменения каталога
  * clearBasket - очищение корзины
  * clearOrder - очищает заказ 
  * addBasketList - добавить в корзину
  * changeBasketList - удаляет item по id
  * setOrderField, setContactsField - сохранение заказа, данных и инициализация событий валидации
  * validateOrder - валидация заказа
  * validateContacts - валидация контактов

 # Класс ProductCard
  Класс представляет собой компонент карточки товара, предназначен для управления состоянием карточки и обработки собитый клика на неё.

  ### Свойства класса
  * _title: HTMLElement - название товара
  * _price: HTMLElement - цена товара
  * _category: HTMLElement - категория товара
  * _image?: HTMLImageElement - картинка товара
  * _button?: HTMLButtonElement - кнопка действий с карточкой
  * _index?: HTMLSpanElement - id карточки

  ### Методы класса
   * set id, get id - установка, возвращение id
   * set title, get title - установка, возвращение названия товара
   * get price - возвращает цену товара
   * set category - управление цветом категории
   * set image - установка изображения товара
   * set button - установка textContent кнопки управления товаром

# Класс SuccessModal
  Окно с сообщением об успешном действии

  ### Методы класса
   * show(message) — отображает модальное окно с текстом message
   * hide() — скрывает окно
   * setAutoClose(delay) — автоматически скрывает через delay мс

# Класс ProductDetails
  Блок с подробной информацией о товаре

  ### Методы класса
   * setProduct(product) — получает объект товара и отображает его детали (название, изображение, цена, категория и т.д.)
   * setProduct(product) — получает объект товара и отображает его детали (название, изображение, цена, категория и т.д.)
   * hide() — скрывает блок
   * setCloseButton(callback) — установка обработчика закрытия

# Класс CartItem
  Представление одного элемента в списке покупок (корзине)

  ### Методы класса
   * setProduct(product) — принимает объект товара и отрисовывает его в виде карточки в корзине
   * setRemoveButton(callback) — устанавливает обработчик удаления товара
   * updateQuantity(count) — обновляет количество товара
   * getTotalPrice() — возвращает итоговую цену товара (цена × количество)

# Класс PageLayout
  Класс, предназначенный для управления и отображения основных элементов страницы, таких как каталог продуктов, счетчик товаров в корзине, а так же позволяющий блокировать прокрутку страницы.

  ### Свойства класса
  * _counter: HTMLElement - счётчик корзины
  * _catalog: HTMLElement - каталог товаров
  * _wrapper: HTMLElement - обёртка, lock страницы
  * _basketButton: HTMLElement - кнопка корзины

  ### Методы класса
  * set counter - счётчик корзины
  * set catalog - добавление карточек на страницу
  * set locked - lock интерфейса

# Каталог товаров
## catalog:changed
Описание: Каталог обновлён (например, после загрузки с сервера).
Источник: AppState.setCatalog()
Обработчик:

Обновляет отображение карточек товаров в PageLayout

Отображает каждую карточку с помощью ProductCard

# Корзина
## basket:changed
Описание: Состав корзины изменился (добавление/удаление товара).
Источник: AppState.addBasketList(), AppState.changeBasketList(), AppState.clearBasket()
Обработчик:

Обновляет список товаров в ShoppingCart

Обновляет сумму заказа

Обновляет счётчик товаров в PageLayout

# Заказ
## order:changed
Описание: Данные заказа обновлены (например, выбор способа оплаты).
Источник: AppState.setOrderField()
Обработчик:

Обновляет форму заказа (Form)

Контролирует активность кнопки оформления

# Контакты
## contacts:changed
Описание: Контактные данные обновлены (имя, телефон, email и т.д.).
Источник: AppState.setContactsField()
Обработчик:

Обновляет форму контактов

Проверяет валидность формы

# Ошибки формы
## formErrors:changed
Описание: Обновлены ошибки валидации формы.
Источник: AppState.validateOrder(), AppState.validateContacts()
Обработчик:

Обновляет визуальное отображение ошибок в Form

# Заказ оформлен
## order:completed
Описание: Заказ успешно оформлен и отправлен.
Источник: после успешного Api.postRequest()
Обработчик:

Показывает SuccessModal с сообщением

Очищает корзину (clearBasket())

Скрывает форму заказа

# Предпросмотр товара
## preview:changed
Описание: Пользователь открыл карточку товара для просмотра.
Источник: AppState.setPreview() (предположительно)
Обработчик:

Показывает ProductDetails

Устанавливает данные для подробного просмотра